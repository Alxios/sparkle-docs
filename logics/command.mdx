---
title: "Command"
description: "Exécuter une action en réponse à une commande Twitch"
icon: "square-terminal"
---

Les commandes vous permettent d'exécuter des actions en réponse à des commandes spécifiques envoyées dans le chat Twitch. Chaque commande peut avoir plusieurs alias de déclenchement et vous pouvez également définir un format spécifique pour les arguments de la commande.

## Syntaxe d'une Commande

Les commandes sont déclenchées lorsque l'utilisateur envoie une commande spécifique dans le chat Twitch. Chaque commande est associée à une liste de noms (`name`) et une fonction de rappel (`callback`) qui définit la logique à exécuter.

La liste `name` permet de spécifier plusieurs déclencheurs (alias) pour une même commande. Par exemple, si vous avez une commande qui doit répondre à `!command` et `!cmd`, vous pouvez le faire comme suit :

```typescript
export default createCommand({
  name: ["command", "cmd"],
  async callback(payload, ctx) {
    // Votre code ici
  },
})
```

## Paramètres de Commande

Vous pouvez personnaliser davantage vos commandes en ajoutant des paramètres pour gérer différentes actions en fonction des arguments fournis par les utilisateurs. Par exemple, vous pouvez créer une commande `!dice` qui simule le lancer de dés avec un nombre spécifié de faces.

```typescript
export default createCommand({
  name: ["dice"],
  params: {
    sides: z.number().min(2, "Le nombre de faces doit être supérieur à 1"),
  },
  async callback(payload, ctx) {
    const { username, params } = payload
    const { sides } = params

    // Générer un nombre aléatoire entre 1 et le nombre de faces spécifié
    const randomNumber = Math.floor(Math.random() * sides) + 1

    // Envoyer le résultat dans le chat Twitch
    await ctx.twitch.sendMessage({
      message: `${username} a obtenu un ${randomNumber} sur un dé à ${sides} faces !`,
    })
  },
})
```

Dans cet exemple, nous avons créé une commande `dice` avec un paramètre `sides` pour spécifier le nombre de faces du dé. Lorsqu'un utilisateur exécute `!dice 6`, le bot générera un nombre aléatoire entre 1 et 6 et affichera le résultat.

## Utilisation d'une Commande

Pour utiliser une commande, les utilisateurs du chat Twitch peuvent simplement envoyer la commande spécifiée dans le chat. Par exemple, si la commande est nommée `!hello`, les utilisateurs peuvent entrer :

```text
!hello John 5
```

La commande déclenchera alors la logique spécifiée dans la fonction de rappel (`callback`) et passera les données fournies par l'utilisateur dans le paramètre `payload.params`. Les données devront respecter les contraintes définies avec le paramètre `params`.

## Payload de Commande

Le payload de la commande est un objet qui définit les informations associées à la commande. Il ressemble à ceci :

<ResponseField name="username" type="string">
  Le nom d'utilisateur de l'utilisateur qui a envoyé la commande.
</ResponseField>

<ResponseField name="message" type="string">
  Le message envoyé par l'utilisateur.
</ResponseField>

<ResponseField name="params" type="(string | number | boolean)[]">
  Les paramètres de la commande après avoir été analysés.
</ResponseField>

{/* Le payload contient des informations telles que le nom d'utilisateur (`username`), le message envoyé (`message`), les paramètres spécifiés par l'utilisateur (`params`), les informations sur l'utilisateur (`userInfo`), et les informations sur le message (`msgInfo`). */}

## Personnalisation des Commandes

Les commandes peuvent être personnalisées pour répondre à une variété de scénarios. Vous pouvez utiliser les données fournies dans le paramètre `payload.params` pour personnaliser la réponse en fonction des besoins de votre bot Twitch.

Assurez-vous de gérer correctement les erreurs et les cas d'utilisation spécifiques à votre application pour offrir une expérience utilisateur fluide.

Pour des exemples d'utilisation avancée des commandes, consultez les sections suivantes :

- [Gestion de la Base de Données](/docs/database)
- [Interactions avec Twitch](/docs/twitch)

N'oubliez pas de consulter la documentation de chaque sous-objet pour en savoir plus sur les fonctionnalités disponibles et les meilleures pratiques.
